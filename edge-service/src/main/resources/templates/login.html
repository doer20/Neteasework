<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>登录页</title>
    <link rel="stylesheet" href="/css/style.css">

</head>
<body background="/img/night.jpg" style="background-size: cover">


<div class="container" style="margin-top: 80px">

    <div class="row col-md-4 col-md-offset-4 sign-up-card" style="text-align: center">
        <img src="/img/doubanjiangAndText2.png" class="img-rounded" style="width:300px;height:170px"><br>
        <div style="text-align: center">
            <div id="user" style="margin-top: 60px" >
                <form id="form" class="form-group" action="/login" method="post" onsubmit="return login()">
                    <input type="text" required="required" id="user-name" class="form-control" placeholder="用户名" name="username">
                    <input type="password" required="required" id="user-pwd" class="form-control" placeholder="密码" name="password">
                    <input type="submit"  class="btn btn-default" value="登录">
                    <input type="reset"  class="btn btn-default" value="重置">
                </form>
            </div>
        </div>
    </div>

</div>
<script type="text/javascript" src="/js/md5.js"></script>
<script>
    var form = document.getElementById("form");
    var username = form['username'];
    var password = form['password'];

    function login() {
        var subForm = new FormData();
        subForm.append("username",username.value);
        subForm.append("password",md5(password.value));
        $.ajax({
            type: "POST",
            url:"/login",
            data:subForm,
            contentType: false,
            processData: false,
            error: function(request) {
                alert("登录失败");
            },
            success: function(msg) {
                if (msg == 'success') {
                    alert("登录成功");
                    window.location.href="/home"
                }else {
                    alert("登录失败");
                }
            }
        });
        return false;
    }
</script>
</body>
</html>


